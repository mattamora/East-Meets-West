<!DOCTYPE html>
<html lang="en">
<head>
    <title>Guest Checkout</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, inital-scale=1">
    <link rel="stylesheet" href="CSS files/guestcheckoutSTYLE.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap" rel="stylesheet">
</head>

<body>
    
<!--  For top bar only  -->
<nav class="top_bar">
    <span class="name"><a href="home.html"><img src="pics/logo2.png" class="logo"> Restaurant 362</a></span>
    <div class="navTop">
        <span class="menu"><a href="menu.html">Menu</a></span>
        <span class="locations"><a href="#">Location</a></span>
        <span class="sign_in"><a href="sign_in.html">Sign In</a></span>
    </div>
    <span><a href="checkout.html"><img src="pics/cart.jpg" alt="cart" class="cart"></a></span>
</nav>

<!-- main content -->

<div class="main_content">
    <div class="page_container">
        <div class="section_one" id="section1">
            <div class="header" onclick="toggleSection('section1')">
                <h3>Guest Information</h3>
                <span class="caret">&#9660;</span>
            </div>
            <div class="content">
                <div class="info">
                    <h2>Contact Details</h2>
                    <input id="firstName" type="text" placeholder="First Name" class="firstName">
                    <input id="lastName" type="text" placeholder="Last Name" class="LastName">
                    <input id="username" type="text" placeholder="Email" class="email">
                    <input id="password" type="password" placeholder="Password">
                    <!--<img src="pics/eye.jpg" class ="eye" id="showEye">
                    <img src="pics/closeEye.jpg" class ="closeEye" id="hideEye">-->
                    <input id="phoneNumber" type="text" placeholder="Phone Number" class="number">
                 </div>
            </div>
        </div>

        <div class="line"></div>

        <div class="section_two" id="section2">
            <div class="header" onclick="toggleSection('section2')">
                <h3>Payment Information</h3>
                <span class="caret">&#9660;</span>
            </div>
            <div class="content">
                <div class="payment">
                    <h2>Card Details</h2>
                    <input id="cardName" type="text" placeholder="Cardholder Name" class="cardName">
                    <input id="cardNumber" type="text" placeholder="Card Number" class="cardNumber">
                    <div class="cardInfo">
                        <input id="mmYY" type="text" placeholder="MM / YY" class="expiration">
                        <input id="cVV" type="text" placeholder="CVV" class="CVV">
                    </div>
                    <h2>Billing Address</h2>
                    <input id="address" type="text" placeholder="Address" class="address">
                    <input id="city" type="text" placeholder="City" class="city">
                    <input id="state" type="text" placeholder="State" class="state">
                    <input id="zipCode" type="text" placeholder="ZIP Code" class="zip">
                    <button id="paymentButton">CONFIRM ORDER</button>
                 </div>
            </div>
        </div>
    </div>

    <div class="order_info">
        <div class="order_food">
            <div class="cart_item">
                <div class="content_container">
                    <div class="item">
                        <h3 id="foodItemCart1">Food Item #1</h3>
                        <p id="foodPriceCart1" class="item_price">$0.00</p>
                    </div>
                    <p id="foodDescCart1" class="desc">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, 
                        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                    </p>
                </div>
            </div>
            <div class="cart_item">
                <div class="content_container">
                    <div class="item">
                        <h3 id="foodItemCart2" >Food Item #1</h3>
                        <p id="foodPriceCart2" class="item_price">$0.00</p>
                    </div>
                    <p id="foodDescCart2" class="desc">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, 
                        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                    </p>
                </div>
            </div>
            <div class="cart_item">
                <div class="content_container">
                    <div class="item">
                        <h3 id="foodItemCart3">Food Item #1</h3>
                        <p id="foodPriceCart3" class="item_price">$0.00</p>
                    </div>
                    <p id="foodDescCart3" class="desc">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, 
                        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                    </p>
                </div>
            </div>
            
            <div class="bottom">
                <div class="order_bottom">
                    <h3>Cart Total</h3>
                    <div class="order_content">
                        <p>Subtotal:</p>
                        <p id="subTotalCart">$</p>
                    </div>
                    <div class="order_content">
                        <p>Tax 7.25%:</p>
                        <p id="taxCart">$</p>
                    </div>
                    <div class="order_content">
                        <p>Total:</p>
                        <p id="totalCart">$</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="order_details">
            <div class="order_top">
                <h2>ORDER DETAILS</h2>
                <div class="order_content">
                    <p>Pickup at:</p>
                    <p><a target="_blank" href="https://www.google.com/maps/dir//csuf/data=!4m6!4m5!1m1!4e2!1m2!1m1!1s0x80dcd5ce8cc61391:0x2b9810bbb94af355?sa=X&ved=1t:3061&ictx=111">800 N State College Blvd, Fullerton</a></p>
                </div>
                <div class="order_content">
                    <p>Date:</p>
                    <p id="order-date">(Date)</p>
                </div>
                <div class="order_content">
                    <p>Estimated Pickup Time:</p>
                    <p id="order-time">(Time)</p>
                </div>
            </div>
        </div>
        
        <span><a class="checkout" onclick="confirm()">CHECK OUT</a></span>
   

    </div>

</div>

<!--  Confirmation Pop up -->
<div class="confirmation">  
    <div class="confirmationPop">
        <button class="closePop" onclick="closePopup()">âœ•</button>
        <h2>ORDER CONFIRMED!</h2>
        <div class="redBorder">
            <h3>Pick Up At: <a target="_blank" href="https://www.google.com/maps/dir//csuf/data=!4m6!4m5!1m1!4e2!1m2!1m1!1s0x80dcd5ce8cc61391:0x2b9810bbb94af355?sa=X&ved=1t:3061&ictx=111"><span>800 N State College Blvd, Fullerton, CA 9283</span></a></h3>
            <h3>Date: <span id="pop-date">dateVariable</span></h3>
            <h3>Ready By: <span id="pop-time">timeVariable</span></h3>
        </div>
    </div>
</div>

<!--  footer, bottom of the page  -->
    
<footer class="footer">
    <div class="bottomLeft">
        <a href="#"><h5>Contact Us</h5></a>
        <br></br>
        <h6> CPSC 362 - SUMMER 2024</h6>
        <span>MATTHEW AMORA</span> 
        <span>EDGAR CARDENAS</span> 
        <span>LAWRENCE CUI</span> 
        <span>MANVIR DHILLON</span>
        <span>WINDLY NGUYEN</span>
    </div>
    <div class="bottomRight">
        
        <a href="sign_up.html"><img src="pics/bottomLeft.jpg" class="family"></a>
        <a href="home.html"><img src="pics/logo2.png" class="logo2"></a>
    </div>
</footer>


<!--    JAVASCRIPT CODE    -->
<script>
    function toggleSection(sectionId) {
        const section = document.getElementById(sectionId);
        const content = section.querySelector('.content');
        const caret = section.querySelector('.caret');

        if (content.style.display === 'block') {
            content.style.display = 'none';
            caret.classList.remove('up');
        } else {
            content.style.display = 'block';
            caret.classList.add('up');
        }
    }

    function toggleSection(sectionId) {
        const section = document.getElementById(sectionId);
        const content = section.querySelector('.content');
        const header = section.querySelector('.header');
        const caret = section.querySelector('.caret');

        // Toggle content visibility
        if (content.classList.contains('active')) {
            content.classList.remove('active');
            header.classList.remove('active');
            caret.classList.remove('up');
        } else {
            content.classList.add('active');
            header.classList.add('active');
            caret.classList.add('up');
        }
    }

    // CODE FOR GETTING DATE AND TIME
    const today = new Date();
    const fullDate = `${String(today.getMonth() + 1).padStart(2, '0')}/${String(today.getDate()).padStart(2, '0')}/${today.getFullYear()}`;
    // Extract hours, minutes, and seconds
    today.setMinutes(today.getMinutes() + 30); // add 30 minutes to the current time for pickup time
    let hours = today.getHours();
    const minutes = String(today.getMinutes()).padStart(2, '0');
    const amPm = hours >= 12 ? 'PM' : 'AM'; // Determine AM or PM suffix
    // Convert 24-hour format to 12-hour format
    hours = hours % 12;
    hours = hours ? hours : 12; // If hours is 0, set it to 12
    const time = `${hours}:${minutes} ${amPm}`; // time variable
    // Update the <p> elements with the date and time
    document.getElementById('order-date').textContent = fullDate;
    document.getElementById('pop-date').textContent = fullDate;
    document.getElementById('order-time').textContent = time;
    document.getElementById('pop-time').textContent = time;

    // CODE FOR CALCULATING PRICES
        // SUBTOTAL
        //     let subtotal = 0;
        //     document.querySelectorAll('.item_price').forEach(item => {
        //         subtotal += parseFloat(item.textContent.replace('$', ''));
        //     });
        //     document.getElementById('subtotal').textContent = `$${subtotal.toFixed(2)}`;
        // // TAX
        //     const taxRate = 0.0725;
        //     const tax = subtotal * taxRate;
        //     document.getElementById('tax').textContent = `$${tax.toFixed(2)}`;
        // // TOTAL
        //     const total = subtotal + tax;
        //     document.getElementById('total').textContent = `$${total.toFixed(2)}`;

    // CODE FOR SHOWING POPUP (CONFIRMING THE ORDER)
        function confirm() { // OPEN THE POPUP
            document.querySelector('.confirmation').style.display = 'flex';
        } 

    // CODE FOR CLOSING ORDER POPUP
        
        function closePopup() { // function to close popup screen
            document.querySelector('.confirmation').style.display = 'none';// Hide the popup container
        } 
        document.querySelector('.confirmation').addEventListener('click', (event) => { // close the popup when clicking on the background
            if (event.target === document.querySelector('.confirmation')) { // when the background is clicked
                closePopup(); // Hide the popup screen
            }
        }); 

</script>


</body>

<!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>

<!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-analytics.js"></script>

<!-- Add Firebase products that you want to use -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script type="module" src="javascript/firebaseInit.js"></script>
<script type="module" src="javascript/cartDetails.js"></script>

</html>
